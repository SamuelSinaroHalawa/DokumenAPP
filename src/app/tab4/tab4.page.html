<ion-header translucent="true">
  <ion-toolbar color="primary">
    <ion-title class="ion-text-center">ðŸ“Š Statistik & Riwayat</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="ion-padding content-background">

  <!-- Statistik Ringkas -->
  <ion-grid class="ion-margin-bottom">
    <ion-row>
      <ion-col size="4">
        <ion-card class="ion-text-center" color="light">
          <ion-card-header>
            <ion-icon name="documents-outline" size="large" color="primary"></ion-icon>
            <ion-card-title>Total</ion-card-title>
            <ion-card-subtitle>{{ totalDokumen }}</ion-card-subtitle>
          </ion-card-header>
        </ion-card>
      </ion-col>

      <ion-col size="4">
        <ion-card class="ion-text-center" color="warning">
          <ion-card-header>
            <ion-icon name="hourglass-outline" size="large" color="dark"></ion-icon>
            <ion-card-title>Diproses</ion-card-title>
            <ion-card-subtitle>{{ totalDiproses }}</ion-card-subtitle>
          </ion-card-header>
        </ion-card>
      </ion-col>

      <ion-col size="4">
        <ion-card class="ion-text-center" color="success">
          <ion-card-header>
            <ion-icon name="checkmark-done-circle-outline" size="large" color="light"></ion-icon>
            <ion-card-title>Selesai</ion-card-title>
            <ion-card-subtitle>{{ totalSelesai }}</ion-card-subtitle>
          </ion-card-header>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Grafik Bar Status -->
  <ion-card class="ion-padding">
    <ion-card-header>
      <ion-card-title class="ion-text-center">ðŸ“ˆ Grafik Status Dokumen</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="chart-container">
        <canvas #statusChart style="width: 100%; height: 320px;"></canvas>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Riwayat Dokumen Terbaru -->
  <ion-card class="ion-margin-top">
    <ion-card-header>
      <ion-card-title>ðŸ•’ Riwayat Pengajuan Terbaru</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list *ngIf="dokumenTerbaru.length > 0; else emptyRiwayat">
        <ion-item *ngFor="let item of dokumenTerbaru">
          <ion-icon name="file-tray-stacked-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>{{ item.nama_pengaju }} <small>({{ item.jenis_dokumen }})</small></h3>
            <p>
              {{ item.tanggal_pengajuan | date:'dd MMM yyyy' }} -
              <ion-badge [color]="getStatusColor(item.status)" class="ion-margin-start">
                {{ item.status }}
              </ion-badge>
            </p>
          </ion-label>
        </ion-item>
      </ion-list>

      <ng-template #emptyRiwayat>
        <div class="ion-text-center ion-padding">
          <ion-icon name="cloud-offline-outline" size="large" color="medium"></ion-icon>
          <p class="ion-text-center">Belum ada riwayat pengajuan.</p>
        </div>
      </ng-template>
    </ion-card-content>
  </ion-card>

</ion-content>
